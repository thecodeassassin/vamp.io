<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Documentations on Vamp</title>
    <link>documentation/index.xml</link>
    <description>Recent content in Documentations on Vamp</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Released under the Apache 2 license</copyright>
    <lastBuildDate>Wed, 02 Nov 2016 09:00:00 +0000</lastBuildDate>
    <atom:link href="documentation/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Older versions</title>
      <link>/documentation/release-notes/older-versions/</link>
      <pubDate>Wed, 02 Nov 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/release-notes/older-versions/</guid>
      <description>&lt;p&gt;All release notes about older Vamp versions can be found in the &lt;a href=&#34;https://github.com/magneticio/vamp/releases&#34;&gt;Github release notes&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Events and metrics</title>
      <link>/documentation/how-vamp-works/events-and-metrics/</link>
      <pubDate>Fri, 21 Oct 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/how-vamp-works/events-and-metrics/</guid>
      <description>

&lt;p&gt;To provide an effective feedback loop, HTTP/TCP logs should be collected, stored and analyzed. Collection and storing is done with a combination of HAProxy, VGA and Logstash setup. Logs are stored in Elasticsearch and can be later visualised by Kibana.&lt;/p&gt;

&lt;h2 id=&#34;how-traffic-is-logged&#34;&gt;How traffic is logged&lt;/h2&gt;

&lt;p&gt;Vamp uses Logstash to format and store logs from running applications HAProxy (via Vamp Gateway Agent) in Elasticsearch indexes. Logstash listens on UDP port and formats incoming log raw data in json format. Vamp API actions (including those generated by Vamp workflows and the Vamp UI) and running service events are stored by the Vamp API to specific Elasticsearch indexes.
Data and events are read by Vamp components either directly from Elasticsearch or via the Vamp API:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The Vamp UI reads data and events via the Vamp API. Health and Metrics events (generated by Vamp workflows) are required by the Vamp UI.&lt;/li&gt;
&lt;li&gt;Vamp workflows read formatted log data directly from Elasticsearch and events are via the Vamp API. In theory, workflows could also read events directly from Elasticsearch.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;./images/diagram/events-and-metrics-flow.svg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;formatted-raw-data-logs&#34;&gt;Formatted raw data (logs)&lt;/h2&gt;

&lt;h3 id=&#34;haproxy&#34;&gt;HAProxy&lt;/h3&gt;

&lt;p&gt;HAProxy generates logs and makes them accessible via open socket - check the HAProxy configuration of log (&lt;a href=&#34;https://github.com/magneticio/vamp-gateway-agent/blob/master/haproxy.basic.cfg&#34;&gt;github.com/magneticio - haproxy.cfg&lt;/a&gt;).
VGA listens on log socket and any new messages are forwarded to the Logstash instance. The HAProxy log format is configurable in Vamp configuration &lt;code&gt;vamp.gateway-driver.haproxy&lt;/code&gt; (&lt;a href=&#34;https://github.com/magneticio/vamp/blob/master/bootstrap/src/main/resources/reference.conf&#34;&gt;github.com/magneticio - reference.conf&lt;/a&gt;).
In general, for each HTTP/TCP request to HAProxy, several log messages are created (e.g. for gateway, service and instance level).&lt;/p&gt;

&lt;h3 id=&#34;logstash&#34;&gt;Logstash&lt;/h3&gt;

&lt;p&gt;A simple Logstash configuration should be sufficient for dozens of requests per second - or even more, depending on whether Elastic Stack (ELK) is also used for custom application/service logs etc. This example Logstash configuration (&lt;a href=&#34;https://github.com/magneticio/vamp-docker/blob/master/clique-base/logstash/logstash.conf&#34;&gt;github.com/magneticio - logstash.conf&lt;/a&gt;), together with the default &lt;code&gt;vamp.gateway-driver.haproxy&lt;/code&gt; log format, will transform logs to plain JSON, which can be parsed easily later on (e.g. for Kibana visualisation).&lt;br /&gt;
For alternative Logstash/Elasticsearch setups you can check these examples (&lt;a href=&#34;https://www.elastic.co/guide/en/logstash/current/deploying-and-scaling.html&#34;&gt;elastic.co - Deploying and Scaling Logstash&lt;/a&gt;) and the Logstash command line parameter (&lt;a href=&#34;https://github.com/magneticio/vamp-docker/blob/master/quick-start/supervisord.conf&#34;&gt;github.com/magneticio - Logstash section&lt;/a&gt;).&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Logstash listens on UDP port, but in principle any other listener can receive logs forwarded by VGA.&lt;/li&gt;
&lt;li&gt;Different VGAs can use different Logstash instances.&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&#34;events&#34;&gt;Events&lt;/h2&gt;

&lt;p&gt;Vamp collects events on all running services. Interaction with the API also creates events, like updating blueprints or deleting a deployment. Furthermore, Vamp allows third party applications to create events and trigger Vamp actions.
All events are stored and retrieved using the Event API, part of the &lt;a href=&#34;./documentation/api/api-reference&#34;&gt;Vamp API&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;kibana&#34;&gt;Kibana&lt;/h2&gt;

&lt;p&gt;Vamp can be configured to create Kibana &lt;code&gt;searches&lt;/code&gt;, &lt;code&gt;visualisations&lt;/code&gt; and &lt;code&gt;dashboards&lt;/code&gt; automatically with the &lt;code&gt;vamp.gateway-driver.kibana.enabled&lt;/code&gt; configuration parameter.
  Vamp will do this by inserting ES documents to the Kibana index, so only the URL to access ES is needed (by default reusing the same as for persistence). Read more about &lt;a href=&#34;./documentation/installation/configure-vamp&#34;&gt;Vamp configuration&lt;/a&gt;&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Let&amp;rsquo;s &lt;a href=&#34;./documentation/installation/&#34;&gt;install Vamp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Using the Vamp API</title>
      <link>/documentation/api/using-the-api/</link>
      <pubDate>Wed, 19 Oct 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/api/using-the-api/</guid>
      <description>

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;New in Vamp 0.9.1&lt;/p&gt;
  &lt;p&gt;We&amp;rsquo;ve now added support for Websockets to our HTTP API. More information will follow soon.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Vamp has one REST API. This page explains how to specify pagination, and json and yaml content types, and how to effectively use the Vamp REST API.&lt;/p&gt;

&lt;h4 id=&#34;see-also&#34;&gt;See also&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/api/api-reference/&#34;&gt;Full details of all available API calls&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;content-types&#34;&gt;Content types&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Vamp requests can be in YAML format or JSON format. Set the &lt;code&gt;Content-Type&lt;/code&gt; request header to &lt;code&gt;application/x-yaml&lt;/code&gt; or &lt;code&gt;application/json&lt;/code&gt; accordingly.&lt;/li&gt;
&lt;li&gt;Vamp responses can be in YAML format or JSON format. Set the &lt;code&gt;Accept&lt;/code&gt; request header to &lt;code&gt;application/x-yaml&lt;/code&gt; or &lt;code&gt;application/json&lt;/code&gt; accordingly.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;pagination&#34;&gt;Pagination&lt;/h2&gt;

&lt;p&gt;Vamp API endpoints support pagination with the following scheme:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Request parameters &lt;code&gt;page&lt;/code&gt; (starting from 1, not 0) and &lt;code&gt;per_page&lt;/code&gt; (by default 30) e.g:&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;GET http://vamp:8080/api/v1/breeds?page=5&amp;amp;per_page=20
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;Response headers &lt;code&gt;X-Total-Count&lt;/code&gt; giving the total amount of items (e.g. 349673) and a &lt;code&gt;Link&lt;/code&gt; header for easy traversing, e.g.
&lt;code&gt;
X-Total-Count: 5522
Link:
&amp;lt;http://vamp:8080/api/v1/events/get?page=1&amp;amp;per_page=5&amp;gt;; rel=first,
&amp;lt;http://vamp:8080/api/v1/events/get?page=1&amp;amp;per_page=5&amp;gt;; rel=prev,
&amp;lt;http://vamp:8080/api/v1/events/get?page=2&amp;amp;per_page=5&amp;gt;; rel=next,
&amp;lt;http://vamp:8080/api/v1/events/get?page=19&amp;amp;per_page=5&amp;gt;; rel=last
&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;See &lt;a href=&#34;https://developer.github.com/guides/traversing-with-pagination/&#34;&gt;Github&amp;rsquo;s implementation&lt;/a&gt; for more info.&lt;/p&gt;

&lt;h2 id=&#34;return-codes&#34;&gt;Return codes&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Create &amp;amp; Delete operations are idempotent: sending the second request with the same content will not result to an error response (4xx).&lt;/li&gt;
&lt;li&gt;An update will fail (4xx) if a resource does not exist.&lt;/li&gt;
&lt;li&gt;A successful create operation has status code 201 &lt;code&gt;Created&lt;/code&gt; and the response body contains the created resource.&lt;/li&gt;
&lt;li&gt;A successful update operation has status code 200 &lt;code&gt;OK&lt;/code&gt; or 202 &lt;code&gt;Accepted&lt;/code&gt; and the response body contains the updated resource.&lt;/li&gt;
&lt;li&gt;A successful delete operation has status code 204 &lt;code&gt;No Content&lt;/code&gt; or 202 &lt;code&gt;Accepted&lt;/code&gt; with an empty response body.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;sending-multiple-artifacts-documents-post-put-and-delete&#34;&gt;Sending multiple artifacts (documents) - &lt;code&gt;POST&lt;/code&gt;, &lt;code&gt;PUT&lt;/code&gt; and &lt;code&gt;DELETE&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;It is possible to send YAML document containing more than 1 artifact definition:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Supported methods are &lt;code&gt;POST&lt;/code&gt;, &lt;code&gt;PUT&lt;/code&gt; and &lt;code&gt;DELETE&lt;/code&gt;. Example:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;---
name: ...
kind: breed
# breed definition ...
---
name: ...
kind: blueprint
# blueprint definition ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Additional &lt;code&gt;kind&lt;/code&gt; field is required and it always correspond (singular form) to type of the artifact.
For instance if specific endpoint would be &lt;code&gt;/api/v1/deloyments&lt;/code&gt; then the same deployment request can be sent to &lt;code&gt;api/v1&lt;/code&gt; with additional &lt;code&gt;kind: deployment&lt;/code&gt;.
If specific endpoints are used (e.g. &lt;code&gt;/api/v1/blueprints&lt;/code&gt;) then &lt;code&gt;kind&lt;/code&gt; needs to be ommited.&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&#34;see-also-1&#34;&gt;See also&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/api/api-reference/&#34;&gt;Full details of all available API calls&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>katana</title>
      <link>/documentation/release-notes/katana/</link>
      <pubDate>Wed, 19 Oct 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/release-notes/katana/</guid>
      <description>

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;katana is not an official release&lt;/p&gt;
  &lt;p&gt;All changes since the last official release are described below. This applies only to binaries built from source (master branch).&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&#34;what-has-changed&#34;&gt;What has changed&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;no changes since last release.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;what-is-new&#34;&gt;What is new&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;no changes since last release.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Read all release notes on github (&lt;a href=&#34;https://github.com/magneticio/vamp/releases&#34;&gt;github.com/magneticio - Vamp releases&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/installation/hello-world&#34;&gt;Try out Vamp&lt;/a&gt; with our single container hello world package.&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>version 0.9.0</title>
      <link>/documentation/release-notes/version-0-9-0/</link>
      <pubDate>Wed, 19 Oct 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/release-notes/version-0-9-0/</guid>
      <description>&lt;p&gt;&lt;em&gt;9th September 2016&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The Vamp 0.9.0 release is a very important milestone in the lifecycle of Vamp, as we&amp;rsquo;re removing the Alpha label and are moving to Beta! This means that we will do our utmost best to avoid breaking changes in our API&amp;rsquo;s and DSL, focus even more on stabilising and optimising the current feature-set, while of course continuously introducing powerful new features.&lt;/p&gt;

&lt;p&gt;The Vamp 0.9.0 release is the culmination of three months of hard work by our amazing team! This release incorporates nothing less than 115 issues and I&amp;rsquo;m very proud of what we&amp;rsquo;ve achieved.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;./images/screens/vamp_UI_090.png&#34; alt=&#34;Vamp 0.9.0 UI&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Some of the most notable new features are:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;a brand new opensource UI with much better realtime graphs, sparklines, info, events panel and access to all relevant API objects like breeds, deployments but also new options like gateways and workflows.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;powerful integrated workflows for automation and optimisation like autoscaling, automated canary-releasing etc. using efficient Javascript-based scripting.&lt;/li&gt;
&lt;li&gt;Kubernetes and Rancher support.&lt;/li&gt;
&lt;li&gt;support for custom virtual host names in gateways.&lt;/li&gt;
&lt;li&gt;support for custom HAProxy templates.&lt;/li&gt;
&lt;li&gt;a brand new Vamp Runner helper application for automated integration testing, mocking scenarios and educational purposes.&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And, of course, there&amp;rsquo;s a massive amount of improvements, bug fixes and other optimisations.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/magneticio/vamp/issues?q=is%3Aissue+milestone%3A0.9.0+is%3Aclosed&#34;&gt;github.com/magneticio - complete list of all the closed issues in this release&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Read all release notes on github (&lt;a href=&#34;https://github.com/magneticio/vamp/releases&#34;&gt;github.com/magneticio - Vamp releases&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;You can &lt;a href=&#34;./documentation/installation/hello-world&#34;&gt;try out Vamp&lt;/a&gt; with our single container hello world package.&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Kubernetes 1.x</title>
      <link>/documentation/installation/kubernetes/</link>
      <pubDate>Tue, 04 Oct 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/installation/kubernetes/</guid>
      <description>

&lt;p&gt;The installation will run Vamp together with etcd, Elasticsearch and Logstash on Google container engine and kubernetes. (We will also deploy our demo Sava application to give you something to play around on). Before you begin, it is advisable to try out the official Quickstart for Google Container Engine tutorial first (&lt;a href=&#34;https://cloud.google.com/container-engine/docs/quickstart&#34;&gt;google.com - container engine quickstart&lt;/a&gt;).&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;Kubernetes support is still in Alpha.&lt;/p&gt;
&lt;/div&gt;

&lt;h4 id=&#34;tested-against&#34;&gt;Tested against&lt;/h4&gt;

&lt;p&gt;This guide has been tested on Kubernetes 1.2 and 1.3. Minikube can also be used. (&lt;a href=&#34;https://github.com/kubernetes/minikube&#34;&gt;github.com - minikube&lt;/a&gt;)&lt;/p&gt;

&lt;h4 id=&#34;requirements&#34;&gt;Requirements&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Google Container Engine cluster&lt;/li&gt;
&lt;li&gt;Key-value store (like ZooKeeper, Consul or etcd)&lt;/li&gt;
&lt;li&gt;Elasticsearch and Logstash&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;step-1-create-a-new-gke-cluster&#34;&gt;Step 1: Create a new GKE cluster:&lt;/h3&gt;

&lt;p&gt;The simple way to create a new GKE cluster:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;open Google Cloud Shell&lt;/li&gt;
&lt;li&gt;set a zone, e.g. &lt;code&gt;gcloud config set compute/zone europe-west1-b&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;create a cluster &lt;code&gt;vamp&lt;/code&gt; using default parameters: &lt;code&gt;gcloud container clusters create vamp&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;After the (new) Kubernetes cluster is setup, we are going to continue with the installation using the Kubernetes CLI &lt;code&gt;kubectl&lt;/code&gt;.
You can use &lt;code&gt;kubectl&lt;/code&gt; directly from the Google Cloud Shell, e.g. to check the Kubernetes client and server version:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ kubectl version
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;step-2-deploy-etcd-elasticsearch-and-logstash&#34;&gt;Step 2: Deploy etcd, Elasticsearch and Logstash&lt;/h3&gt;

&lt;p&gt;Let&amp;rsquo;s deploy &lt;code&gt;etcd&lt;/code&gt; - the installation is based on this tutorial (&lt;a href=&#34;https://github.com/coreos/etcd/tree/master/hack/kubernetes-deploy&#34;&gt;github.com/coreos - etcd on Kubernetes&lt;/a&gt;).
Execute:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ kubectl create \
        -f https://raw.githubusercontent.com/magneticio/vamp-docker/master/vamp-kubernetes/etcd.yml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Deploy Elasticsearch and Logstash with a proper Vamp Logstash configuration (&lt;a href=&#34;https://github.com/magneticio/elastic&#34;&gt;github.com/magneticio - elastic&lt;/a&gt;):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ kubectl run elastic --image=magneticio/elastic:2.2
$ kubectl expose deployment elastic --protocol=TCP --port=9200 --name=elasticsearch
$ kubectl expose deployment elastic --protocol=UDP --port=10001 --name=logstash
$ kubectl expose deployment elastic --protocol=TCP --port=5601 --name=kibana
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;This is not a production grade setup. You would also need to take care of persistence and running multiple replicas of each pod.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&#34;step-3-run-vamp&#34;&gt;Step 3: Run Vamp&lt;/h3&gt;

&lt;p&gt;Let&amp;rsquo;s run Vamp gateway agent as a &lt;code&gt;daemon set&lt;/code&gt; first:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ kubectl create \
        -f https://raw.githubusercontent.com/magneticio/vamp-docker/master/vamp-kubernetes/vga.yml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To deploy Vamp, execute:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ kubectl run vamp --image=magneticio/vamp:0.9.0-kubernetes
$ kubectl expose deployment vamp --protocol=TCP --port=8080 --name=vamp --type=&amp;quot;LoadBalancer&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The Vamp image uses the following configuration (&lt;a href=&#34;https://github.com/magneticio/vamp-docker/blob/master/vamp-kubernetes/application.conf&#34;&gt;github.com/magneticio - Vamp kubernetes configuration&lt;/a&gt;). The Vamp UI includes mixpanel integration. We monitor data on Vamp usage solely to inform our ongoing product development. Feel free to block this at your firewall, or &lt;a href=&#34;contact&#34;&gt;contact us&lt;/a&gt; if you’d like further details.&lt;/p&gt;

&lt;p&gt;Wait a bit until Vamp is running and check out the Kubernetes services:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ kubectl get services
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The output should be similar to this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME                 CLUSTER-IP     EXTERNAL-IP      PORT(S)             AGE
elasticsearch        10.3.242.188   &amp;lt;none&amp;gt;           9200/TCP            4m
etcd-client          10.3.247.112   &amp;lt;none&amp;gt;           2379/TCP            4m
etcd0                10.3.251.13    &amp;lt;none&amp;gt;           2379/TCP,2380/TCP   4m
etcd1                10.3.251.103   &amp;lt;none&amp;gt;           2379/TCP,2380/TCP   4m
etcd2                10.3.250.20    &amp;lt;none&amp;gt;           2379/TCP,2380/TCP   4m
kubernetes           10.3.240.1     &amp;lt;none&amp;gt;           443/TCP             5m
logstash             10.3.254.16    &amp;lt;none&amp;gt;           10001/UDP           4m
vamp                 10.3.242.93    146.148.118.45   8080/TCP            2m
vamp-gateway-agent   10.3.254.234   146.148.22.145   80/TCP              2m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Notice that the Vamp UI is exposed (in this example) on &lt;code&gt;http://146.148.118.45:8080&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;step-4-deploy-the-sava-demo-application&#34;&gt;Step 4: Deploy the Sava demo application&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;---
name: sava:1.0
gateways:
  9050: sava/port
clusters:
  sava:
    services:
      breed:
        name: sava:1.0.0
        deployable: magneticio/sava:1.0.0
        ports:
          port: 8080/http
      scale:
        cpu: 0.2       
        memory: 64MB
        instances: 1
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;Be sure that the cluster has enough resources (CPU, memory), otherwise deployments will be in pending state.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Once it&amp;rsquo;s running we can check if all Vamp Gateway Agent services are up:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ kubectl get services --show-labels -l vamp=gateway
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can see that for each gateway a new service is created:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME                      CLUSTER-IP     EXTERNAL-IP     PORT(S)     AGE       LABELS
hex1f8c9a0157c9fe3335e9   10.3.243.199   104.155.24.47   9050/TCP    2m        lookup_name=a7ad6869e65e9c047f956cf7d1b4d01a89e
ef486,vamp=gateway
hex26bb0695e9a85ec34b03   10.3.245.85    23.251.143.62   40000/TCP   2m        lookup_name=6ace45cb2c155e85bd0c84123d1dab5a6cb
12c97,vamp=gateway
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;In this setup Vamp is deliberately configured to initiate exposure of all gateway and VGA ports. This would not be the case if the default and recommended setting are used.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Now we can access our &lt;code&gt;sava&lt;/code&gt; service on &lt;code&gt;http://104.155.24.47:9050&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The default Kubernetes service type can be set in configuration: &lt;code&gt;vamp.container-driver.kubernetes.service-type&lt;/code&gt;, possible values are &lt;code&gt;LoadBalancer&lt;/code&gt; or &lt;code&gt;NodePort&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;We can also access gateways using virtual hosts. Vamp Gateway Agent service is on IP &lt;code&gt;146.148.22.145&lt;/code&gt; in this example, so:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ curl --resolve 9050.sava-1-0.vamp:80:146.148.22.145 -v http://9050.sava-1-0.vamp
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;Don&amp;rsquo;t forget to clean up your Kubernetes cluster and firewall rules  if you don&amp;rsquo;t want to use them anymore (&lt;a href=&#34;https://cloud.google.com/container-engine/docs/quickstart#clean-up&#34;&gt;google.com - container engine quickstart: clean up&lt;/a&gt;).&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Once you have Vamp up and running you can jump into the &lt;a href=&#34;./documentation/tutorials/&#34;&gt;getting started tutorials&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Things still not running? &lt;a href=&#34;https://github.com/magneticio/vamp/issues&#34;&gt;We&amp;rsquo;re here to help →&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you need help you can find us on &lt;a href=&#34;https://gitter.im/magneticio/vamp&#34;&gt;Gitter&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>version 0.9.1</title>
      <link>/documentation/release-notes/version-0-9-1/</link>
      <pubDate>Sat, 01 Oct 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/release-notes/version-0-9-1/</guid>
      <description>

&lt;p&gt;&lt;em&gt;1st November 2016&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;./img/006-mock-ups/VAMP-laptop-v091.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;the-new-stuff&#34;&gt;The new stuff&lt;/h2&gt;

&lt;p&gt;This release of Vamp introduces:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The biggie: We&amp;rsquo;ve added Websockets support to our HTTP API. And we&amp;rsquo;re now using this heavily in our new UI to improve responsiveness, smoothness and speed. &lt;a href=&#34;https://github.com/magneticio/vamp/issues/529&#34;&gt;https://github.com/magneticio/vamp/issues/529&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;We&amp;rsquo;ve updated our UI to a nice dark theme due to public demand, we love it as it&amp;rsquo;s much easier on the eyes, and of course we&amp;rsquo;re very interested in hearing &lt;a href=&#34;mailto:info@magnetic.io&#34;&gt;your thoughts&lt;/a&gt;!&lt;/li&gt;
&lt;li&gt;We&amp;rsquo;ve updated our charts with the amazing Smoothie Charts library for smooth running charts and sparklines.&lt;/li&gt;
&lt;li&gt;You can now configure Vamp to use a key-value store for persistence data storage. By default nothing is defined, and you need to choose either ElasticSearch or key-value. Take a look at the &lt;a href=&#34;https://github.com/magneticio/vamp/blob/master/bootstrap/src/main/resources/reference.conf&#34;&gt;Vamp Quickstart configuration&lt;/a&gt; for possible settings. The design reasons for this addition are having less dependencies on Elasticsearch, better re-use of the available key-value stores that come with cluster-managers (like Zookeeper in DC/OS or Etcd in Kubernetes) and more robustness (i.e. if we temporarily loose ES the persistence data is still available in the K/V store, only the metrics data is temporarily unavailable). Possible issues might be the performance of the key-value store after some time. This is a known issue being investigated. &lt;a href=&#34;https://github.com/magneticio/vamp/issues/750&#34;&gt;https://github.com/magneticio/vamp/issues/750&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Gateway stickyness is now editable through the UI&lt;/li&gt;
&lt;li&gt;Scales and gateways are seperate entities exposed through the UI&lt;/li&gt;
&lt;li&gt;Multi-select delete actions in the UI&lt;/li&gt;
&lt;li&gt;You can now filter health and/or metrics events in the EVENTS stream panel&lt;/li&gt;
&lt;li&gt;And of course lots of other improvements and bug-fixes that can be found here: &lt;a href=&#34;https://github.com/magneticio/vamp/issues?q=is%3Aissue+milestone%3A0.9.1+is%3Aclosed&#34;&gt;https://github.com/magneticio/vamp/issues?q=is%3Aissue+milestone%3A0.9.1+is%3Aclosed&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;what-has-changed&#34;&gt;What has changed&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;BREAKING CHANGE&lt;/strong&gt;: In the Vamp configuration the “rest-api” section has changed to “http-api”. When running Vamp 0.9.1 you need to change this setting accordingly. NB REST and websockets are both a part of our HTTP API. Check this &lt;a href=&#34;https://github.com/magneticio/vamp/blob/master/bootstrap/src/main/resources/reference.conf&#34;&gt;Vamp configuration&lt;/a&gt; example.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BREAKING CHANGE&lt;/strong&gt;: The default value for Vamp Gateway Agent &lt;code&gt;storeKey&lt;/code&gt; has &lt;code&gt;/vamp/gateways/haproxy/1.6&lt;/code&gt; - changed from &lt;code&gt;/vamp/haproxy/1.6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;In the &lt;a href=&#34;./documentation/installation/configure-vamp/#persistence&#34;&gt;Vamp configuration&lt;/a&gt; we set &lt;code&gt;persistence caching&lt;/code&gt; by default to &lt;code&gt;false&lt;/code&gt;. In our pre-build Vamp images we set this to &lt;code&gt;true&lt;/code&gt; to make it easier on the persistence store load. &lt;a href=&#34;https://github.com/magneticio/vamp/issues/792&#34;&gt;https://github.com/magneticio/vamp/issues/792&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;We&amp;rsquo;ve changed the updating deployment service states. &lt;a href=&#34;https://github.com/magneticio/vamp/issues/797&#34;&gt;https://github.com/magneticio/vamp/issues/797&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;known-issues&#34;&gt;Known issues&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Health in deployment detail screen stays at 100% even when a gateway error is measured. In the gateway detail screen this works correctly.&lt;/li&gt;
&lt;li&gt;Memory leak issues when running workflows.&lt;/li&gt;
&lt;li&gt;Instability when using Zookeeper in the Vamp quickstart packages after a period of time.&lt;/li&gt;
&lt;li&gt;When using Elasticsearch for persistence storage there can be stale data due to speed of the websockets implementation and slower / eventual indexing of ES. A browser refresh solves this.&lt;/li&gt;
&lt;li&gt;Vamp-docker quickstart throws error when starting up.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The full list of improvements and bug-fixes that can be found here: &lt;a href=&#34;https://github.com/magneticio/vamp/issues?q=is%3Aissue+milestone%3A0.9.1+is%3Aclosed&#34;&gt;https://github.com/magneticio/vamp/issues?q=is%3Aissue+milestone%3A0.9.1+is%3Aclosed&lt;/a&gt;&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Read all release notes on github (&lt;a href=&#34;https://github.com/magneticio/vamp/releases&#34;&gt;github.com/magneticio - Vamp releases&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;You can &lt;a href=&#34;./documentation/installation/hello-world&#34;&gt;try out Vamp&lt;/a&gt; with our single container hello world package.&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Azure Container Service</title>
      <link>/documentation/installation/azure-container-service/</link>
      <pubDate>Fri, 30 Sep 2016 12:00:00 +0000</pubDate>
      
      <guid>/documentation/installation/azure-container-service/</guid>
      <description>&lt;p&gt;To run Vamp together with Azure Container Service (&lt;a href=&#34;https://azure.microsoft.com/en-us/services/container-service/&#34;&gt;azure.microsoft.com - Container Service&lt;/a&gt;), you need to use DC/OS as the default ACS Docker container scheduler.&lt;/p&gt;

&lt;p&gt;After you have activated your ACS setup with DC/OS, go to your DC/OS admin environment and install Vamp using our &lt;a href=&#34;./documentation/installation/dcos/&#34;&gt;DC/OS installation instructions&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Once you have Vamp up and running you can jump into the &lt;a href=&#34;./documentation/tutorials/&#34;&gt;getting started tutorials&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Things still not running? &lt;a href=&#34;https://github.com/magneticio/vamp/issues&#34;&gt;We&amp;rsquo;re here to help →&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;If you need help you can find us on &lt;a href=&#34;https://gitter.im/magneticio/vamp&#34;&gt;Gitter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>DC/OS 1.7 and 1.8</title>
      <link>/documentation/installation/dcos/</link>
      <pubDate>Fri, 30 Sep 2016 12:00:00 +0000</pubDate>
      
      <guid>/documentation/installation/dcos/</guid>
      <description>

&lt;p&gt;There are different ways to install Vamp on DC.OS. On this page we start out with the most common setup, but if you are interested in doing a custom install or working with public and private nodes you should jump to that section.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/installation/dcos/#standard-install&#34;&gt;Standard install&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/installation/dcos/#custom-install&#34;&gt;Custom install&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/installation/dcos/#public-and-private-nodes&#34;&gt;Public and private nodes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;standard-install&#34;&gt;Standard install&lt;/h2&gt;

&lt;p&gt;This setup will run Vamp, Mesos and Marathon, together with Zookeeper, Elasticsearch and Logstash on DC/OS. If you need help you can find us on &lt;a href=&#34;https://gitter.im/magneticio/vamp&#34;&gt;Gitter&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&#34;tested-against&#34;&gt;Tested against&lt;/h4&gt;

&lt;p&gt;This guide has been tested on both 1.7 and the latest 1.8 version of DC/OS.&lt;/p&gt;

&lt;h4 id=&#34;requirements&#34;&gt;Requirements&lt;/h4&gt;

&lt;p&gt;Before you start you need to have a DC/OS cluster up and running, as well as the its CLI configured to use it. We assume you have it up and running on &lt;a href=&#34;http://dcos.example.com/&#34;&gt;http://dcos.example.com/&lt;/a&gt;.
Setting up DC/OS is outside the scope of this document, for that you need to refer to the official documentation:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dcos.io/docs/1.7/administration/installing/&#34;&gt;https://dcos.io/docs/1.7/administration/installing/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dcos.io/docs/1.7/usage/cli/&#34;&gt;https://dcos.io/docs/1.7/usage/cli/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dcos.io/docs/1.8/administration/installing/&#34;&gt;https://dcos.io/docs/1.8/administration/installing/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dcos.io/docs/1.8/usage/cli/&#34;&gt;https://dcos.io/docs/1.8/usage/cli/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;step-1-install-elasticsearch-logstash&#34;&gt;Step 1: Install Elasticsearch + Logstash&lt;/h3&gt;

&lt;p&gt;Mesos, Marathon and ZooKeeper are all installed by DC/OS. In addition to these, Vamp requires Elasticsearch and Logstash for metrics collection and aggregation.&lt;/p&gt;

&lt;p&gt;You could install Elasticsearch on DC/OS by following the Mesos Elasticsearch documentation (&lt;a href=&#34;http://mesos-elasticsearch.readthedocs.org/en/latest/&#34;&gt;mesos-elasticsearch - Elasticsearch Mesos Framework&lt;/a&gt;).
However, Vamp will also need Logstash (not currently available as a DC/OS package) with a specific Vamp Logstash configuration (&lt;a href=&#34;https://github.com/magneticio/vamp-docker/blob/master/clique-base/logstash/logstash.conf&#34;&gt;github.com/magneticio - Vamp Docker logstash.conf&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;To make life easier, we have created compatible Docker images for a Vamp Elastic Stack (&lt;a href=&#34;https://hub.docker.com/r/magneticio/elastic/&#34;&gt;hub.docker.com - magneticio elastic&lt;/a&gt;) that you can use with the Mesos elasticsearch documentation (&lt;a href=&#34;http://mesos-elasticsearch.readthedocs.org/en/latest/#how-to-install-on-marathon&#34;&gt;mesos-elasticsearch - How to install on Marathon&lt;/a&gt;).
Our advice is to use our custom Elasticsearch+Logstash Docker image. Let&amp;rsquo;s get started!&lt;/p&gt;

&lt;p&gt;Create &lt;code&gt;elasticsearch.json&lt;/code&gt; with the following content:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;id&amp;quot;: &amp;quot;elasticsearch&amp;quot;,
  &amp;quot;instances&amp;quot;: 1,
  &amp;quot;cpus&amp;quot;: 0.2,
  &amp;quot;mem&amp;quot;: 1024.0,
  &amp;quot;container&amp;quot;: {
    &amp;quot;docker&amp;quot;: {
      &amp;quot;image&amp;quot;: &amp;quot;magneticio/elastic:2.2&amp;quot;,
      &amp;quot;network&amp;quot;: &amp;quot;HOST&amp;quot;,
      &amp;quot;forcePullImage&amp;quot;: true
    }
  },
  &amp;quot;healthChecks&amp;quot;: [
    {
      &amp;quot;protocol&amp;quot;: &amp;quot;TCP&amp;quot;,
      &amp;quot;gracePeriodSeconds&amp;quot;: 30,
      &amp;quot;intervalSeconds&amp;quot;: 10,
      &amp;quot;timeoutSeconds&amp;quot;: 5,
      &amp;quot;port&amp;quot;: 9200,
      &amp;quot;maxConsecutiveFailures&amp;quot;: 0
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will run the container with 1G of RAM and a basic health check on the elasticsearch port.&lt;/p&gt;

&lt;p&gt;Using the CLI we can install this in our cluster:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ dcos marathon app add elasticsearch.json
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you get no error message you should now be able to see it being deployed:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ dcos marathon app list
ID              MEM   CPUS  TASKS  HEALTH  DEPLOYMENT  CONTAINER  CMD   
/elasticsearch  1024  0.2    0/1    0/0      scale       DOCKER   None  
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Once it&amp;rsquo;s fully up and running you should see all tasks and health checks being up:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ dcos marathon app list
ID              MEM   CPUS  TASKS  HEALTH  DEPLOYMENT  CONTAINER  CMD   
/elasticsearch  1024  0.2    1/1    1/1       ---        DOCKER   None  
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;step-2-deploy-vamp&#34;&gt;Step 2: Deploy Vamp&lt;/h3&gt;

&lt;p&gt;Once you have elasticsearch up and running it&amp;rsquo;s time to move on to Vamp. The Vamp UI includes mixpanel integration. We monitor data on Vamp usage solely to inform our ongoing product development. Feel free to block this at your firewall, or &lt;a href=&#34;contact&#34;&gt;contact us&lt;/a&gt; if you’d like further details.&lt;/p&gt;

&lt;p&gt;Create &lt;code&gt;vamp.json&lt;/code&gt; with the following content:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;id&amp;quot;: &amp;quot;vamp/vamp&amp;quot;,
  &amp;quot;instances&amp;quot;: 1,
  &amp;quot;cpus&amp;quot;: 0.5,
  &amp;quot;mem&amp;quot;: 1024,
  &amp;quot;container&amp;quot;: {
    &amp;quot;type&amp;quot;: &amp;quot;DOCKER&amp;quot;,
    &amp;quot;docker&amp;quot;: {
      &amp;quot;image&amp;quot;: &amp;quot;magneticio/vamp:katana-dcos&amp;quot;,
      &amp;quot;network&amp;quot;: &amp;quot;BRIDGE&amp;quot;,
      &amp;quot;portMappings&amp;quot;: [
        {
          &amp;quot;containerPort&amp;quot;: 8080,
          &amp;quot;hostPort&amp;quot;: 0,
          &amp;quot;name&amp;quot;: &amp;quot;vip0&amp;quot;,
          &amp;quot;labels&amp;quot;: {
            &amp;quot;VIP_0&amp;quot;: &amp;quot;10.20.0.100:8080&amp;quot;
          }
        }
      ],
      &amp;quot;forcePullImage&amp;quot;: true
    }
  },
  &amp;quot;labels&amp;quot;: {
    &amp;quot;DCOS_SERVICE_NAME&amp;quot;: &amp;quot;vamp&amp;quot;,
    &amp;quot;DCOS_SERVICE_SCHEME&amp;quot;: &amp;quot;http&amp;quot;,
    &amp;quot;DCOS_SERVICE_PORT_INDEX&amp;quot;: &amp;quot;0&amp;quot;
  },
  &amp;quot;env&amp;quot;: {
    &amp;quot;VAMP_WAIT_FOR&amp;quot;: &amp;quot;http://elasticsearch.marathon.mesos:9200/.kibana&amp;quot;,
    &amp;quot;VAMP_PERSISTENCE_DATABASE_ELASTICSEARCH_URL&amp;quot;: &amp;quot;http://elasticsearch.marathon.mesos:9200&amp;quot;,
    &amp;quot;VAMP_GATEWAY_DRIVER_LOGSTASH_HOST&amp;quot;: &amp;quot;elasticsearch.marathon.mesos&amp;quot;,
    &amp;quot;VAMP_WORKFLOW_DRIVER_VAMP_URL&amp;quot;: &amp;quot;http://10.20.0.100:8080&amp;quot;,
    &amp;quot;VAMP_PULSE_ELASTICSEARCH_URL&amp;quot;: &amp;quot;http://elasticsearch.marathon.mesos:9200&amp;quot;
  },  
  &amp;quot;healthChecks&amp;quot;: [
    {
      &amp;quot;protocol&amp;quot;: &amp;quot;TCP&amp;quot;,
      &amp;quot;gracePeriodSeconds&amp;quot;: 30,
      &amp;quot;intervalSeconds&amp;quot;: 10,
      &amp;quot;timeoutSeconds&amp;quot;: 5,
      &amp;quot;portIndex&amp;quot;: 0,
      &amp;quot;maxConsecutiveFailures&amp;quot;: 0
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This service definition will download our Vamp container and spin it up in your DC/OS cluster on a private node in bridge networking mode. It will also configure the apporiate labels for the AdminRouter to expose the UI through DC/OS, as well as an internal VIP for other applications to talk to Vamp, adjusting some defaults to work inside DC/OS, and finally a health check for monitoring.&lt;/p&gt;

&lt;p&gt;Deploy it with the CLI, like with did with elasticsearch:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ dcos marathon app add vamp.json

$ dcos marathon app list
ID              MEM   CPUS  TASKS  HEALTH  DEPLOYMENT  CONTAINER  CMD   
/elasticsearch  1024  0.2    1/1    1/1       ---        DOCKER   None  
/vamp/vamp      1024  0.5    0/1    0/0      scale       DOCKER   None  

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It will take a minute for Vamp to deploy all its components, you can see that by looking in the &amp;ldquo;tasks&amp;rdquo; column, where Vamp is listed as 0/1. Run the list command again and you should see all the components coming online:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ dcos marathon app list
ID                        MEM   CPUS  TASKS  HEALTH  DEPLOYMENT  CONTAINER  CMD
/elasticsearch            1024  0.2    1/1    1/1       ---        DOCKER   None
/vamp/vamp                1024  0.5    1/1    1/1       ---        DOCKER   None
/vamp/vamp-gateway-agent  256   0.2    3/3    ---       ---        DOCKER   [&#39;--storeType=zookeeper&#39;, &#39;--storeConnection=zk-1.zk:2181&#39;, &#39;--storeKey=/vamp/gateways/haproxy/1.6&#39;, &#39;--logstash=elasticsearch.marathon.mesos:10001&#39;]
/vamp/workflow-health      64   0.1    1/1    ---       ---        DOCKER   None
/vamp/workflow-kibana      64   0.1    1/1    ---       ---        DOCKER   None
/vamp/workflow-metrics     64   0.1    1/1    ---       ---        DOCKER   None
/vamp/workflow-vga         64   0.1    1/1    ---       ---        DOCKER   None
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Vamp has now spun up all it&amp;rsquo;s components and you should be able to access the ui by opening &lt;a href=&#34;http://dcos.example.com/service/vamp/&#34;&gt;http://dcos.example.com/service/vamp/&lt;/a&gt; in your browser.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Now you&amp;rsquo;re ready to follow our &lt;a href=&#34;./documentation/tutorials/&#34;&gt;Vamp getting started tutorials&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Things still not running? &lt;a href=&#34;https://github.com/magneticio/vamp/issues&#34;&gt;We&amp;rsquo;re here to help →&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;NB If you need help you can also find us on &lt;a href=&#34;https://gitter.im/magneticio/vamp&#34;&gt;Gitter&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;custom-install&#34;&gt;Custom install&lt;/h2&gt;

&lt;p&gt;The Vamp DC/OS Docker image (&lt;a href=&#34;https://github.com/magneticio/vamp-docker/tree/master/vamp-dcos&#34;&gt;github.com/magneticio - Vamp DC/OS&lt;/a&gt;) contains configuration (&lt;a href=&#34;https://github.com/magneticio/vamp-docker/blob/master/vamp-dcos/application.conf&#34;&gt;github.com/magneticio - Vamp DC/OS configuration&lt;/a&gt;) that can be overridden for specific needs by:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Making a new Docker image based on the Vamp DC/OS image&lt;/li&gt;
&lt;li&gt;Using &lt;a href=&#34;./documentation/installation/configure-vamp#environment-variable-configuration&#34;&gt;environment variables&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;example-1-remove-the-metrics-and-health-workflows-by-vamp-configuration-and-keep-the-kibana-workflow&#34;&gt;Example 1 - Remove the &lt;code&gt;metrics&lt;/code&gt; and &lt;code&gt;health&lt;/code&gt; workflows by Vamp configuration and keep the &lt;code&gt;kibana&lt;/code&gt; workflow:&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;vamp.lifter.artifact.resources = [
    &amp;quot;breeds/kibana.js&amp;quot;, &amp;quot;workflows/kibana.yml&amp;quot;
  ]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or doing the same using Marathon JSON&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;&amp;quot;env&amp;quot;: {
  &amp;quot;VAMP_LIFTER_ARTIFACT_RESOURCES&amp;quot;: &amp;quot;[\&amp;quot;breeds/kibana.js\&amp;quot;,\&amp;quot;workflows/kibana.yml\&amp;quot;]&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;example-2-avoid-automatic-deployment-of-vamp-gateway-agent&#34;&gt;Example 2 - Avoid automatic deployment of Vamp Gateway Agent&lt;/h4&gt;

&lt;p&gt;Remove &lt;code&gt;vga-marathon&lt;/code&gt; breed and workflow from &lt;code&gt;vamp.lifter.artifact.files&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;vamp.lifter.artifact.files = []
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;or using Marathon JSON&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;&amp;quot;env&amp;quot;: {
  &amp;quot;VAMP_LIFTER_ARTIFACT_FILES&amp;quot;: &amp;quot;[]&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;public-and-private-nodes&#34;&gt;Public and private nodes&lt;/h2&gt;

&lt;p&gt;Running Vamp on public Mesos agent node(s) and disabling automatic Vamp Gateway Agent deployments (but keeping other default workflows) can be done with the following Marathon JSON:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;id&amp;quot;: &amp;quot;vamp/vamp&amp;quot;,
  &amp;quot;instances&amp;quot;: 1,
  &amp;quot;cpus&amp;quot;: 0.5,
  &amp;quot;mem&amp;quot;: 1024,
  &amp;quot;container&amp;quot;: {
    &amp;quot;type&amp;quot;: &amp;quot;DOCKER&amp;quot;,
    &amp;quot;docker&amp;quot;: {
      &amp;quot;image&amp;quot;: &amp;quot;magneticio/vamp:katana-dcos&amp;quot;,
      &amp;quot;network&amp;quot;: &amp;quot;BRIDGE&amp;quot;,
      &amp;quot;portMappings&amp;quot;: [
        {
          &amp;quot;containerPort&amp;quot;: 8080,
          &amp;quot;hostPort&amp;quot;: 0,
          &amp;quot;name&amp;quot;: &amp;quot;vip0&amp;quot;,
          &amp;quot;labels&amp;quot;: {
            &amp;quot;VIP_0&amp;quot;: &amp;quot;10.20.0.100:8080&amp;quot;
          }
        }
      ],
      &amp;quot;forcePullImage&amp;quot;: true
    }
  },
  &amp;quot;labels&amp;quot;: {
    &amp;quot;DCOS_SERVICE_NAME&amp;quot;: &amp;quot;vamp&amp;quot;,
    &amp;quot;DCOS_SERVICE_SCHEME&amp;quot;: &amp;quot;http&amp;quot;,
    &amp;quot;DCOS_SERVICE_PORT_INDEX&amp;quot;: &amp;quot;0&amp;quot;
  },
  &amp;quot;env&amp;quot;: {
    &amp;quot;VAMP_LIFTER_ARTIFACT_FILES&amp;quot;: &amp;quot;[\&amp;quot;breeds/health.js\&amp;quot;,\&amp;quot;workflows/health.yml\&amp;quot;,\&amp;quot;breeds/metrics.js\&amp;quot;,\&amp;quot;workflows/metrics.yml\&amp;quot;,\&amp;quot;breeds/kibana.js\&amp;quot;,\&amp;quot;workflows/kibana.yml\&amp;quot;]&amp;quot;,
    &amp;quot;VAMP_WAIT_FOR&amp;quot;: &amp;quot;http://elasticsearch.marathon.mesos:9200/.kibana&amp;quot;,
    &amp;quot;VAMP_PERSISTENCE_DATABASE_ELASTICSEARCH_URL&amp;quot;: &amp;quot;http://elasticsearch.marathon.mesos:9200&amp;quot;,
    &amp;quot;VAMP_GATEWAY_DRIVER_LOGSTASH_HOST&amp;quot;: &amp;quot;elasticsearch.marathon.mesos&amp;quot;,
    &amp;quot;VAMP_WORKFLOW_DRIVER_VAMP_URL&amp;quot;: &amp;quot;http://vamp-vamp.marathon.mesos:8080&amp;quot;,
    &amp;quot;VAMP_PULSE_ELASTICSEARCH_URL&amp;quot;: &amp;quot;http://elasticsearch.marathon.mesos:9200&amp;quot;
  },
  &amp;quot;acceptedResourceRoles&amp;quot;: [
    &amp;quot;slave_public&amp;quot;
  ],
  &amp;quot;healthChecks&amp;quot;: [
    {
      &amp;quot;protocol&amp;quot;: &amp;quot;TCP&amp;quot;,
      &amp;quot;gracePeriodSeconds&amp;quot;: 30,
      &amp;quot;intervalSeconds&amp;quot;: 10,
      &amp;quot;timeoutSeconds&amp;quot;: 5,
      &amp;quot;portIndex&amp;quot;: 0,
      &amp;quot;maxConsecutiveFailures&amp;quot;: 0
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Deploying Vamp Gateway Agent on all public and private Mesos agent nodes through Marathon JSON - NB replace &lt;code&gt;$INSTANCES&lt;/code&gt; (e.g. to be the same as total number of Mesos agent nodes) and optionally other parameters:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;id&amp;quot;: &amp;quot;vamp/vamp-gateway-agent&amp;quot;,
  &amp;quot;instances&amp;quot;: $INSTANCES,
  &amp;quot;cpus&amp;quot;: 0.2,
  &amp;quot;mem&amp;quot;: 256.0,
  &amp;quot;container&amp;quot;: {
    &amp;quot;type&amp;quot;: &amp;quot;DOCKER&amp;quot;,
    &amp;quot;docker&amp;quot;: {
      &amp;quot;image&amp;quot;: &amp;quot;magneticio/vamp-gateway-agent:katana&amp;quot;,
      &amp;quot;network&amp;quot;: &amp;quot;HOST&amp;quot;,
      &amp;quot;privileged&amp;quot;: true,
      &amp;quot;forcePullImage&amp;quot;: true
    }
  },
  &amp;quot;args&amp;quot;: [
    &amp;quot;--storeType=zookeeper&amp;quot;,
    &amp;quot;--storeConnection=zk-1.zk:2181&amp;quot;,
    &amp;quot;--storeKey=/vamp/gateways/haproxy/1.6&amp;quot;,
    &amp;quot;--logstash=elasticsearch.marathon.mesos:10001&amp;quot;
  ],
  &amp;quot;constraints&amp;quot;: [
    [
      &amp;quot;hostname&amp;quot;,
      &amp;quot;UNIQUE&amp;quot;
    ]
  ],
  &amp;quot;acceptedResourceRoles&amp;quot;: [
    &amp;quot;slave_public&amp;quot;,
    &amp;quot;*&amp;quot;
  ]
}

&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Once you have Vamp up and running you can follow our &lt;a href=&#34;./documentation/tutorials/&#34;&gt;getting started tutorials&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Chcek the &lt;a href=&#34;./documentation/how-vamp-works/architecture-and-components/&#34;&gt;Vamp documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Things still not running? &lt;a href=&#34;https://github.com/magneticio/vamp/issues&#34;&gt;We&amp;rsquo;re here to help →&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you need help you can find us on &lt;a href=&#34;https://gitter.im/magneticio/vamp&#34;&gt;Gitter&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Docker</title>
      <link>/documentation/installation/docker/</link>
      <pubDate>Fri, 30 Sep 2016 12:00:00 +0000</pubDate>
      
      <guid>/documentation/installation/docker/</guid>
      <description>

&lt;p&gt;Vamp can talk directly to a Docker daemon and its driver is configured by default. This is useful for local testing. Vamp can even run inside Docker while deploying to Docker.  You can pass native Docker options by &lt;a href=&#34;./documentation/using-vamp/blueprints/#dialects&#34;&gt;using the Docker dialect in a Vamp blueprint.&lt;/a&gt;. Docker Swarm support is coming soon.&lt;/p&gt;

&lt;h4 id=&#34;set-container-driver&#34;&gt;Set container driver&lt;/h4&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/installation/configure-vamp#docker&#34;&gt;set Docker as the container driver&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;./images/logos/docker-member.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Mesos/Marathon</title>
      <link>/documentation/installation/mesos-marathon/</link>
      <pubDate>Fri, 30 Sep 2016 12:00:00 +0000</pubDate>
      
      <guid>/documentation/installation/mesos-marathon/</guid>
      <description>

&lt;p&gt;Vamp can use the full power of Marathon running on either a DCOS cluster or custom Mesos cluster. You can use Vamp&amp;rsquo;s DSL, or you can pass native Marathon options by &lt;a href=&#34;./documentation/using-vamp/blueprints/#dialects&#34;&gt;using a dialect in a blueprint.&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&#34;install&#34;&gt;Install&lt;/h4&gt;

&lt;p&gt;The instructions included on the &lt;a href=&#34;./documentation/installation/dcos&#34;&gt;DC/OS installation page&lt;/a&gt; will also work with Mesos/Marathon.&lt;/p&gt;

&lt;h4 id=&#34;set-container-driver&#34;&gt;set container driver&lt;/h4&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/installation/configure-vamp#mesos-marathon&#34;&gt;set Mesos/Marathon as the container driver&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>API Reference</title>
      <link>/documentation/api/api-reference/</link>
      <pubDate>Tue, 13 Sep 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/api/api-reference/</guid>
      <description>

&lt;p&gt;This page gives full details of all available API calls. See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API.&lt;/p&gt;

&lt;h2 id=&#34;blueprints&#34;&gt;Blueprints&lt;/h2&gt;

&lt;h3 id=&#34;list-blueprints&#34;&gt;List blueprints&lt;/h3&gt;

&lt;p&gt;Lists all blueprints without any pagination or filtering.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/blueprints
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;expand_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breed references will be replaced (recursively) with full breed definitions. &lt;code&gt;400 Bad Request&lt;/code&gt; in case some breeds are not yet fully defined.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;only_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breeds will be replaced with their references.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;get-a-single-blueprint&#34;&gt;Get a single blueprint&lt;/h3&gt;

&lt;p&gt;Lists all details for one specific blueprint.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/blueprints/{blueprint_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;expand_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breed references will be replaced (recursively) with full breed definitions. &lt;code&gt;400 Bad Request&lt;/code&gt; in case some breeds are not yet fully defined.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;only_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breeds will be replaced with their references.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;create-blueprint&#34;&gt;Create blueprint&lt;/h3&gt;

&lt;p&gt;Creates a new blueprint. Accepts JSON or YAML formatted blueprints. Set the &lt;code&gt;Content-Type&lt;/code&gt; request header to &lt;code&gt;application/json&lt;/code&gt; or &lt;code&gt;application/x-yaml&lt;/code&gt; accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/blueprints
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the blueprint and returns a &lt;code&gt;201 Created&lt;/code&gt; if the blueprint is valid.This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-a-blueprint&#34;&gt;Update a blueprint&lt;/h3&gt;

&lt;p&gt;Updates the content of a specific blueprint.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/blueprints/{blueprint_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the blueprint and returns a &lt;code&gt;200 OK&lt;/code&gt; if the blueprint is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-a-blueprint&#34;&gt;Delete a blueprint&lt;/h3&gt;

&lt;p&gt;Deletes a blueprint.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/blueprints/{blueprint_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;returns a &lt;code&gt;204 No Content&lt;/code&gt; without actual delete of the blueprint.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;breeds&#34;&gt;Breeds&lt;/h2&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;

&lt;h3 id=&#34;list-breeds&#34;&gt;List breeds&lt;/h3&gt;

&lt;p&gt;Lists all breeds without any pagination or filtering.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/breeds
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;expand_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breed dependencies will be replaced (recursively) with full breed definitions. &lt;code&gt;400 Bad Request&lt;/code&gt; in case some dependencies are not yet fully defined.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;only_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all full breed dependencies will be replaced with their references.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;get-a-single-breed&#34;&gt;Get a single breed&lt;/h3&gt;

&lt;p&gt;Lists all details for one specific breed.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/breeds/{breed_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;expand_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breed dependencies will be replaced (recursively) with full breed definitions. &lt;code&gt;400 Bad Request&lt;/code&gt; in case some dependencies are not yet fully defined.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;only_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all full breed dependencies will be replaced with their references.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;create-breed&#34;&gt;Create breed&lt;/h3&gt;

&lt;p&gt;Creates a new breed. Accepts JSON or YAML formatted breeds. Set the &lt;code&gt;Content-Type&lt;/code&gt; request header to &lt;code&gt;application/json&lt;/code&gt; or &lt;code&gt;application/x-yaml&lt;/code&gt; accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/breeds
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the breed and returns a &lt;code&gt;201 Created&lt;/code&gt; if the breed is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-a-breed&#34;&gt;Update a breed&lt;/h3&gt;

&lt;p&gt;Updates the content of a specific breed.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/breeds/{breed_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the breed and returns a &lt;code&gt;200 OK&lt;/code&gt; if the breed is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-a-breed&#34;&gt;Delete a breed&lt;/h3&gt;

&lt;p&gt;Deletes a breed.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/breeds/{breed_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;returns a &lt;code&gt;204 No Content&lt;/code&gt; without actual delete of the breed.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;conditions&#34;&gt;Conditions&lt;/h2&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;

&lt;h3 id=&#34;list-conditions&#34;&gt;List conditions&lt;/h3&gt;

&lt;p&gt;Lists all conditions without any pagination or filtering.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/conditions
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;get-a-single-condition&#34;&gt;Get a single condition&lt;/h3&gt;

&lt;p&gt;Lists all details for one specific condition.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/conditions/{condition_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;create-condition&#34;&gt;Create condition&lt;/h3&gt;

&lt;p&gt;Creates a new condition. Accepts JSON or YAML formatted conditions. Set the &lt;code&gt;Content-Type&lt;/code&gt; request header to &lt;code&gt;application/json&lt;/code&gt; or &lt;code&gt;application/x-yaml&lt;/code&gt; accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/conditions
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the escalation and returns a &lt;code&gt;201 Created&lt;/code&gt; if the escalation is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-a-condition&#34;&gt;Update a condition&lt;/h3&gt;

&lt;p&gt;Updates the content of a specific condition.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/conditions/{condition_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the escalation and returns a &lt;code&gt;200 OK&lt;/code&gt; if the escalation is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-a-condition&#34;&gt;Delete a condition&lt;/h3&gt;

&lt;p&gt;Deletes a condition.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/conditions/{condition_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;returns a &lt;code&gt;204 No Content&lt;/code&gt; without actual delete of the escalation.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;deployments&#34;&gt;Deployments&lt;/h2&gt;

&lt;p&gt;Deployments are non-static entities in the Vamp eco-system. They represent runtime structures so any changes to them will take time to execute and can possibly fail. Most API calls to the &lt;code&gt;/deployments&lt;/code&gt; endpoint will therefore return a &lt;code&gt;202: Accepted&lt;/code&gt; return code, indicating the asynchronous nature of the call.&lt;/p&gt;

&lt;p&gt;Deployments have a set of sub resources: &lt;strong&gt;SLA&amp;rsquo;s&lt;/strong&gt;, &lt;strong&gt;scales&lt;/strong&gt; and &lt;strong&gt;gateways&lt;/strong&gt;. These are instantiations of their static counterparts.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;

&lt;h3 id=&#34;list-deployments&#34;&gt;List deployments&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/deployments
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;as_blueprint&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;exports each deployment as a valid blueprint. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to export in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;expand_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breed references will be replaced (recursively) with full breed definitions. It will be applied only if &lt;code&gt;?as_blueprint=true&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;only_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breeds will be replaced with their references. It will be applied only if &lt;code&gt;?as_blueprint=true&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;get-a-single-deployment&#34;&gt;Get a single deployment&lt;/h3&gt;

&lt;p&gt;Lists all details for one specific deployment.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/deployments/{deployment_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;as_blueprint&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;exports the deployment as a valid blueprint. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to export in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;expand_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breed references will be replaced (recursively) with full breed definitions. It will be applied only if &lt;code&gt;?as_blueprint=true&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;code&gt;only_references&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;all breeds will be replaced with their references. It will be applied only if &lt;code&gt;?as_blueprint=true&lt;/code&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;create-deployment-using-a-blueprint&#34;&gt;Create deployment using a blueprint&lt;/h3&gt;

&lt;p&gt;Creates a new deployment&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/deployments
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Create a named (non UUID) deployment&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/deployments/{deployment_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the blueprint and returns a &lt;code&gt;202 Accepted&lt;/code&gt; if the blueprint is valid for deployment. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-a-deployment-using-a-blueprint&#34;&gt;Update a deployment using a blueprint&lt;/h3&gt;

&lt;p&gt;Updates the settings of a specific deployment.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/deployments/{deployment_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the blueprint and returns a &lt;code&gt;202 Accepted&lt;/code&gt; if the deployment after the update would be still valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-a-deployment-using-a-blueprint&#34;&gt;Delete a deployment using a blueprint&lt;/h3&gt;

&lt;p&gt;Deletes all or parts of a deployment.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/deployments/{deployment_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the blueprint and returns a &lt;code&gt;202 Accepted&lt;/code&gt; if the deployment after the (partial) deletion would be still valid. Actual delete is not performed.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In contrast to most API&amp;rsquo;s, doing a &lt;code&gt;DELETE&lt;/code&gt; in Vamp takes a request body that designates what part of the deployment should be deleted. This allows you to remove specific services, clusters of the whole deployment.&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;&lt;code&gt;DELETE&lt;/code&gt; on deployment with an empty request body will not delete anything.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The most common way to specify what you want to delete is by exporting the target deployment as a blueprint using the &lt;code&gt;?as_blueprint=true&lt;/code&gt; parameter. You then either programmatically or by hand edit the resulting blueprint and specify which of the services you want to delete. You can also use the blueprint as a whole in the &lt;code&gt;DELETE&lt;/code&gt; request. The result is the removal of the full deployment.&lt;/p&gt;

&lt;h4 id=&#34;example-delete-service&#34;&gt;example - delete service&lt;/h4&gt;

&lt;p&gt;This is our (abbreviated) deployment in YAML format. We have two clusters. The first cluster &amp;lsquo;frontend&amp;rsquo; has two services.
We have left out some keys like &lt;code&gt;scale&lt;/code&gt; among others as they have no effect on this specific use case.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;    GET /api/v1/deployments/3df5c37c-5137-4d2c-b1e1-1cb3d03ffcd?as_blueprint=true
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;name: 3df5c37c-5137-4d2c-b1e1-1cb3d03ffcdd
endpoints:
  frontend.port: &#39;9050&#39;
clusters:
  frontend:
    services:
    - breed:
        name: monarch_front:0.1
        deployable: magneticio/monarch:0.1
        ports:
          port: 8080/http
        constants: {}
        dependencies:
          backend:
            ref: monarch_backend:0.3
    - breed:
        name: monarch_front:0.2
        deployable: magneticio/monarch:0.2
        ports:
          port: 8080/http
        dependencies:
          backend:
            ref: monarch_backend:0.3
  backend:
    services:
    - breed:
        name: monarch_backend:0.3
        deployable: magneticio/monarch:0.3
        ports:
          jdbc: 8080/http
        environment_variables: {}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If we want to delete the first service in the &lt;code&gt;frontend&lt;/code&gt; cluster, we use the following blueprint as the request body in the &lt;code&gt;DELETE&lt;/code&gt; action.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/deployments/3df5c37c-5137-4d2c-b1e1-1cb3d03ffcdd
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;name: 3df5c37c-5137-4d2c-b1e1-1cb3d03ffcdd
clusters:
  frontend:
    services:
    - breed:
        ref: monarch_front:0.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If we want to delete the whole deployment, we just specify all the clusters and services.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/deployments/3df5c37c-5137-4d2c-b1e1-1cb3d03ffcdd
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;name: 3df5c37c-5137-4d2c-b1e1-1cb3d03ffcdd
clusters:
  frontend:
    services:
    - breed:
        ref: monarch_front:0.1
    - breed:
        ref: monarch_front:0.2
  backend:
    services:
    - breed:
        ref: monarch_backend:0.3
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;deployment-slas&#34;&gt;Deployment SLAs&lt;/h2&gt;

&lt;h3 id=&#34;get-a-deployment-sla&#34;&gt;Get a deployment SLA&lt;/h3&gt;

&lt;p&gt;Lists all details for a specific SLA that&amp;rsquo;s part of a specific cluster.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/deployments/{deployment_name}/clusters/{cluster_name}/sla
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;set-a-deployment-sla&#34;&gt;Set a deployment SLA&lt;/h3&gt;

&lt;p&gt;Creates or updates a specific deployment SLA.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST|PUT /api/v1/deployments/{deployment_name}/clusters/{cluster_name}/sla
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;delete-a-deployment-sla&#34;&gt;Delete a deployment SLA&lt;/h3&gt;

&lt;p&gt;Deletes as specific deployment SLA.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/deployments/{deployment_name}/clusters/{cluster_name}/sla
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;deployment-scales&#34;&gt;Deployment scales&lt;/h2&gt;

&lt;p&gt;Deployment scales are singular resources: you only have one scale per service. Deleting a scale is not a meaningfull action.&lt;/p&gt;

&lt;h3 id=&#34;get-a-deployment-scale&#34;&gt;Get a deployment scale&lt;/h3&gt;

&lt;p&gt;Lists all details for a specific deployment scale that&amp;rsquo;s part of a service inside a cluster.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/deployments/{deployment_name}/clusters/{cluster_name}/services/{service_name}/scale
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;set-a-deployment-scale&#34;&gt;Set a deployment scale&lt;/h3&gt;

&lt;p&gt;Updates a deployment scale.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST|PUT /api/v1/deployments/{deployment_name}/clusters/{cluster_name}/services/{service_name}/scale
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;escalations&#34;&gt;Escalations&lt;/h2&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;

&lt;h3 id=&#34;list-escalations&#34;&gt;List escalations&lt;/h3&gt;

&lt;p&gt;Lists all escalations without any pagination or filtering.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/escalations
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;get-a-single-escalation&#34;&gt;Get a single escalation&lt;/h3&gt;

&lt;p&gt;Lists all details for one specific escalation.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/escalations/{escalation_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;create-escalation&#34;&gt;Create escalation&lt;/h3&gt;

&lt;p&gt;Creates a new escalation. Accepts JSON or YAML formatted escalations. Set the &lt;code&gt;Content-Type&lt;/code&gt; request header to &lt;code&gt;application/json&lt;/code&gt; or &lt;code&gt;application/x-yaml&lt;/code&gt; accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/escalations
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the escalation and returns a &lt;code&gt;201 Created&lt;/code&gt; if the escalation is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-an-escalation&#34;&gt;Update an escalation&lt;/h3&gt;

&lt;p&gt;Updates the content of a specific escalation.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/escalations/{escalation_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the escalation and returns a &lt;code&gt;200 OK&lt;/code&gt; if the escalation is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-an-escalation&#34;&gt;Delete an escalation&lt;/h3&gt;

&lt;p&gt;Deletes an escalation.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/escalations/{escalation_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;returns a &lt;code&gt;204 No Content&lt;/code&gt; without actual delete of the escalation.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;events&#34;&gt;Events&lt;/h2&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;

&lt;h3 id=&#34;list-events&#34;&gt;List events&lt;/h3&gt;

&lt;p&gt;Lists metrics and/or events without any pagination or filtering.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/events/get
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;tag&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Event tag, e.g. &lt;code&gt;GET /api/v1/events?tag=archiving&amp;amp;tag=breeds&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;search criteria can be set in request body, checkout &lt;a href=&#34;./documentation/using-vamp/events/#query-events-using-tags&#34;&gt;examples&lt;/a&gt; for event stream.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&#34;create-events&#34;&gt;Create events&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/events    
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;server-sent-events-sse&#34;&gt;Server-sent events (SSE)&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;GET  /api/v1/events/stream
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;gateways&#34;&gt;Gateways&lt;/h2&gt;

&lt;h3 id=&#34;list-gateways&#34;&gt;List gateways&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/gateways
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;get-a-single-gateway&#34;&gt;Get a single gateway&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/gateways/{gateway_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;create-gateway&#34;&gt;Create gateway&lt;/h3&gt;

&lt;p&gt;Accepts JSON or YAML formatted gateways. Set the &lt;code&gt;Content-Type&lt;/code&gt; request header to &lt;code&gt;application/json&lt;/code&gt; or &lt;code&gt;application/x-yaml&lt;/code&gt; accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/gateways
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the gateway and returns a &lt;code&gt;201 Created&lt;/code&gt; if the gateway is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-a-gateway&#34;&gt;Update a gateway&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/gateways/{gateway_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the gateway and returns a &lt;code&gt;200 OK&lt;/code&gt; if the gateway is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-a-gateway&#34;&gt;Delete a gateway&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/gateways/{gateway_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;returns a &lt;code&gt;204 No Content&lt;/code&gt; without actual delete of the gateway.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;metrics&#34;&gt;Metrics&lt;/h2&gt;

&lt;p&gt;Metrics can be defined on gateways and deployment ports and retrieved:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/api/v1/metrics/gateways/{gateway}/{metrics}
/api/v1/metrics/gateways/{gateway}/routes/$route/{metrics}

/api/v1/metrics/deployments/{deployment}/clusters/{cluster}/ports/{port}/{metrics}
/api/v1/metrics/deployments/{deployment}/clusters/{cluster}/services/{service}/ports/{port}/{metrics}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;example&#34;&gt;Example&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;/api/v1/metrics/deployments/sava/clusters/frontend/ports/api/response-time
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;Metrics are calculated using external services, e.g. Vamp workflows.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&#34;health&#34;&gt;Health&lt;/h2&gt;

&lt;p&gt;Health can be defined on gateways and deployment ports and retrieved:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/api/v1/health/gateways/{gateway}
/api/v1/health/gateways/{gateway}/routes/$route

/api/v1/health/deployments/{deployment}
/api/v1/health/deployments/{deployment}/clusters/{cluster}
/api/v1/health/deployments/{deployment}/clusters/{cluster}/services/{service}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Health is value between 1 (100% healthy) and 0.&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;Health is calculated using external services, e.g. Vamp workflows.&lt;/p&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;scales&#34;&gt;Scales&lt;/h2&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;

&lt;h3 id=&#34;list-scales&#34;&gt;List scales&lt;/h3&gt;

&lt;p&gt;Lists all scales without any pagination or filtering.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/scales
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;get-a-single-scale&#34;&gt;Get a single scale&lt;/h3&gt;

&lt;p&gt;Lists all details for one specific scale.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/scales/{scale_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;create-scale&#34;&gt;Create scale&lt;/h3&gt;

&lt;p&gt;Creates a new scale. Accepts JSON or YAML formatted scales. Set the &lt;code&gt;Content-Type&lt;/code&gt; request header to &lt;code&gt;application/json&lt;/code&gt; or &lt;code&gt;application/x-yaml&lt;/code&gt; accordingly.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/scales
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the scale and returns a &lt;code&gt;201 Created&lt;/code&gt; if the scale is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-a-scale&#34;&gt;Update a scale&lt;/h3&gt;

&lt;p&gt;Updates the content of a specific scale.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/scales/{scale_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the scale and returns a &lt;code&gt;200 OK&lt;/code&gt; if the scale is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-a-scale&#34;&gt;Delete a scale&lt;/h3&gt;

&lt;p&gt;Deletes a scale.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/scales/{scale_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;returns a &lt;code&gt;204 No Content&lt;/code&gt; without actual delete of the scale.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;slas&#34;&gt;SLAs&lt;/h2&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;

&lt;h3 id=&#34;list-slas&#34;&gt;List SLAs&lt;/h3&gt;

&lt;p&gt;Lists all slas without any pagination or filtering.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/slas
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;get-a-single-sla&#34;&gt;Get a single SLA&lt;/h3&gt;

&lt;p&gt;Lists all details for one specific breed.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/slas/{sla_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;create-an-sla&#34;&gt;Create an SLA&lt;/h3&gt;

&lt;p&gt;Creates a new SLA&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;POST /api/v1/slas   
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the SLA and returns a &lt;code&gt;201 Created&lt;/code&gt; if the SLA is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;update-an-sla&#34;&gt;Update an SLA&lt;/h3&gt;

&lt;p&gt;Updates the content of a specific SLA.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PUT /api/v1/slas/{sla_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;validates the SLA and returns a &lt;code&gt;200 OK&lt;/code&gt; if the SLA is valid. This can be used together with the header &lt;code&gt;Accept: application/x-yaml&lt;/code&gt; to return the result in YAML format instead of the default JSON.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;delete-an-sla&#34;&gt;Delete an SLA&lt;/h3&gt;

&lt;p&gt;Deletes an SLA.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;DELETE /api/v1/slas/{sla_name}
&lt;/code&gt;&lt;/pre&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;options&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;validate_only&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;true or false&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;false&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;returns a &lt;code&gt;204 No Content&lt;/code&gt; without actual delete of the SLA.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;system&#34;&gt;System&lt;/h2&gt;

&lt;p&gt;Vamp provides a set of API endpoints that help with getting general health/configuration status.&lt;/p&gt;

&lt;h3 id=&#34;get-runtime-info&#34;&gt;Get runtime info&lt;/h3&gt;

&lt;p&gt;Lists information about Vamp&amp;rsquo;s JVM environment and runtime status.
Also lists info for configured persistence layer and container driver status.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/info
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Sections are &lt;code&gt;jvm&lt;/code&gt;, &lt;code&gt;persistence&lt;/code&gt;, &lt;code&gt;key_value&lt;/code&gt;, &lt;code&gt;pulse&lt;/code&gt;, &lt;code&gt;gateway_driver&lt;/code&gt;, &lt;code&gt;container_driver&lt;/code&gt; and &lt;code&gt;workflow_driver&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;{
    &amp;quot;message&amp;quot;: &amp;quot;...&amp;quot;,
    &amp;quot;version&amp;quot;: &amp;quot;...&amp;quot;,
    &amp;quot;uuid&amp;quot;: &amp;quot;...&amp;quot;,
    &amp;quot;running_since&amp;quot;: &amp;quot;...&amp;quot;,
    &amp;quot;jvm&amp;quot;: {...},
    &amp;quot;persistence&amp;quot;: {...},
    &amp;quot;key_value&amp;quot;: {...},
    &amp;quot;pulse&amp;quot;: {...},
    &amp;quot;gateway_driver&amp;quot;: {...},
    &amp;quot;container_driver&amp;quot;: {...},
    &amp;quot;workflow_driver&amp;quot;: {...}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;example-explicitly-request-specific-sections&#34;&gt;Example - explicitly request specific sections&lt;/h4&gt;

&lt;p&gt;Explicitly requesting &lt;code&gt;jvm&lt;/code&gt; and &lt;code&gt;persistence&lt;/code&gt; using parameter(s) &lt;code&gt;on&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/info?on=jvm&amp;amp;on=persistence
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;get-vamp-configuration&#34;&gt;Get Vamp configuration&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/config
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;get-haproxy-configuration&#34;&gt;Get HAProxy configuration&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/haproxy
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;debug&#34;&gt;Debug&lt;/h2&gt;

&lt;h3 id=&#34;force-sync&#34;&gt;Force sync&lt;/h3&gt;

&lt;p&gt;Forces Vamp to perform a synchronization cycle, regardless of the configured default interval.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/sync
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;force-sla-check&#34;&gt;Force SLA check&lt;/h3&gt;

&lt;p&gt;Forces Vamp to perform an SLA check, regardless of the configured default interval.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/sla
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;force-escalation&#34;&gt;Force escalation&lt;/h3&gt;

&lt;p&gt;Forces Vamp to perform an escalation check, regardless of the configured default interval.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;GET /api/v1/escalation
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;See &lt;a href=&#34;./documentation/api/using-the-api&#34;&gt;using the Vamp API&lt;/a&gt; for details on pagination, json and yaml content types and effective use of the API&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Architecture and components</title>
      <link>/documentation/how-vamp-works/architecture-and-components/</link>
      <pubDate>Tue, 13 Sep 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/how-vamp-works/architecture-and-components/</guid>
      <description>

&lt;h2 id=&#34;architecture&#34;&gt;Architecture&lt;/h2&gt;

&lt;p&gt;Vamp and the Vamp Gateway Agent require specific elements in your architecture to handle orchetstration, routing, persistence and metrics aggregation. There is no set architecture required for running Vamp and every use case or specific combination of tools and platforms can have its own set up.&lt;/p&gt;

&lt;h4 id=&#34;example-topology&#34;&gt;Example topology&lt;/h4&gt;

&lt;p&gt;The below diagram should be used more as an overview than required architecture. For example, in this diagram the Mesos/Marathon stack and Elasticsearch are included even though these are not a hard dependency. Vamp can be configured to run with other container schedulers, log-aggregators, key-value and event-stores.
&lt;img src=&#34;./images/diagram/Architecture-and-components.svg&#34; alt=&#34;architecture&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;vamp-components&#34;&gt;Vamp components&lt;/h2&gt;

&lt;p&gt;Vamp consists of server- and client-side components that work together with elements in your architecture to handle orchetstration, routing, persistence and metrics aggregation.&lt;/p&gt;

&lt;h3 id=&#34;vamp-ui&#34;&gt;Vamp UI&lt;/h3&gt;

&lt;p&gt;The Vamp UI is a graphical web interface for managing Vamp in a web browser. It is packaged with Vamp.&lt;/p&gt;

&lt;h3 id=&#34;vamp-cli&#34;&gt;Vamp CLI&lt;/h3&gt;

&lt;p&gt;The Vamp CLI is a command line interface for managing Vamp and providing integration with (shell) scripts. It&amp;rsquo;s currently not very well maintained but still can be useful if our REST API cannot be used for your integration requirements.&lt;/p&gt;

&lt;h3 id=&#34;vamp&#34;&gt;Vamp&lt;/h3&gt;

&lt;p&gt;Vamp is the main API endpoint, business logic and service coordinator. Vamp talks to the configured container manager (Docker, Marathon, Kubernetes etc.) and synchronizes it with Vamp Gateway Agent (VGA)  via ZooKeeper, etcd or Consul (distributed key-value stores). Vamp can use Elasticsearch for artifact persistence and to store events (e.g. changes in deployments). Typically, there should be one Vamp instance and one or more VGA instances. Vamp is not a realtime application and only updates deployments and routing when asked to (reactive) and thus doesn&amp;rsquo;t need to run with multiple instances in HA mode. If this is a hard requirement of your project please contact us for the &lt;a href=&#34;./why-use-vamp/enterprise-edition/&#34;&gt;Vamp Enterprise Edition&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;vamp-workflows&#34;&gt;Vamp workflows&lt;/h3&gt;

&lt;p&gt;Vamp workflows are small applications or scripts (for example using JavaScript or your own containers) that automate changes of the running system, and its deployments and gateways. We have included a set of useful workflows out of the box, such as health and metrics, which are used by the Vamp UI to report system status and to enable autoscaling and self-healing. Our &lt;a href=&#34;https://github.com/magneticio/vamp-runner/&#34;&gt;Vamp Runner project&lt;/a&gt; provides more advanced workflow recipes as an example.&lt;/p&gt;

&lt;h3 id=&#34;vamp-gateway-agent-vga&#34;&gt;Vamp Gateway Agent (VGA)&lt;/h3&gt;

&lt;p&gt;Vamp Gateway Agent (VGA) reads the HAProxy configuration from ZooKeeper, etcd or Consul and reloads HAProxy on each configuration change with as close to zero client request interruptions as possible. Typically, there should be one Vamp instance and one or more VGA instances.&lt;br /&gt;
Logs from HAProxy are read over socket and pushed to Logstash over UDP.  VGA will handle and recover from ZooKeeper, etcd, Consul and Logstash outages without interrupting the HAProxy process and client requests.&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Read about the &lt;a href=&#34;./documentation/how-vamp-works/requirements&#34;&gt;requirements to run Vamp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Artifacts</title>
      <link>/documentation/using-vamp/artifacts/</link>
      <pubDate>Tue, 13 Sep 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/using-vamp/artifacts/</guid>
      <description>

&lt;p&gt;Vamp has a few basic entities or artifacts you can work with, these can be classed as static resource descriptions and dynamic runtime entities. Note that API actions on static resource descriptions are mostly synchronous, while API actions on dynamic runtime entities are largely asychronous.&lt;/p&gt;

&lt;h3 id=&#34;static-resource-descriptions&#34;&gt;Static resource descriptions&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Breeds&lt;/strong&gt; describe single services and their dependencies.  &lt;a href=&#34;./documentation/using-vamp/breeds/&#34;&gt;Read more&amp;hellip;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Blueprints&lt;/strong&gt; are, well, blueprints! They describe how breeds work in runtime and what properties they should have.  &lt;a href=&#34;./documentation/using-vamp/blueprints/&#34;&gt;Read more&amp;hellip;&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;dynamic-runtime-entities&#34;&gt;Dynamic runtime entities&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Deployments&lt;/strong&gt; are running blueprints. You can have many deployments from one blueprint and perform actions on each at runtime. Plus, you can turn any running deployment into a blueprint.  &lt;a href=&#34;./documentation/using-vamp/deployments/&#34;&gt;Read more&amp;hellip;&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gateways&lt;/strong&gt; are the &amp;ldquo;stable&amp;rdquo; routing endpoint - defined by a port (incoming) and routes (outgoing).  &lt;a href=&#34;./documentation/using-vamp/gateways/&#34;&gt;Read more&amp;hellip;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Workflows&lt;/strong&gt; are apps (services) deployed on cluster, used for dynamically changing the runtime configuration (e.g. SLA, scaling, condition weight update).  &lt;a href=&#34;./documentation/using-vamp/workflows/&#34;&gt;Read more&amp;hellip;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;working-across-multiple-teams&#34;&gt;Working across multiple teams&lt;/h2&gt;

&lt;p&gt;In larger companies with multiple teams working together on a large project, all required information is often not available at the same time. To facilitate this style of working, Vamp allows you to set placeholders. Placeholders let you communicate with other teams using simple references and gradually build up a complicated deployment. Vamp will only check references at deployment time, this means:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Breeds can be referenced in blueprints before they exist&lt;/li&gt;
&lt;li&gt;You do not need to know the contents of an SLA when you reference it.&lt;/li&gt;
&lt;li&gt;You can reference a variable that someone else should fill in.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Read more about &lt;a href=&#34;./documentation/using-vamp/references/&#34;&gt;referencing artifacts&lt;/a&gt; and &lt;a href=&#34;./documentation/using-vamp/environment-variables/&#34;&gt;environment variables&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Read about &lt;a href=&#34;./documentation/using-vamp/breeds/&#34;&gt;Vamp breeds&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Check the &lt;a href=&#34;./documentation/api/api-reference&#34;&gt;API documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/installation/hello-world&#34;&gt;Try Vamp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Blueprints</title>
      <link>/documentation/using-vamp/blueprints/</link>
      <pubDate>Tue, 13 Sep 2016 09:00:00 +0000</pubDate>
      
      <guid>/documentation/using-vamp/blueprints/</guid>
      <description>

&lt;p&gt;Blueprints are execution plans - they describe how your services should be hooked up and what their topology should look like at runtime. This means you reference your breeds (or define them inline) and add runtime configuration to them.&lt;/p&gt;

&lt;p&gt;Blueprints allow you to add the following extra properties:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/using-vamp/blueprints/#gateways&#34;&gt;Gateways&lt;/a&gt;: a stable port where the service can be reached.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/using-vamp/blueprints/#clusters-and-services&#34;&gt;Clusters and services&lt;/a&gt;: a cluster is a grouping of services with one purpose, i.e. two versions (a/b) of one service.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/using-vamp/environment-variables/&#34;&gt;Environment variables&lt;/a&gt;: a list of variables (interpolated or not) to be made available at runtime.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/using-vamp/blueprints/#dialects&#34;&gt;Dialects&lt;/a&gt;: a dialect is a set of native commands for the underlying container platform, i.e. Docker or Mesosphere Marathon.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/using-vamp/blueprints/#scale&#34;&gt;Scale&lt;/a&gt;: the CPU and memory and the amount of instance allocate to a service.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/using-vamp/conditions/&#34;&gt;Conditions&lt;/a&gt;: how traffic should be directed based on HTTP and/or TCP properties.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/using-vamp/sla/&#34;&gt;SLA&lt;/a&gt; and &lt;a href=&#34;./documentation/using-vamp/escalations/&#34;&gt;escalations&lt;/a&gt;: SLA definition that controls autoscaling.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;example-key-concepts-of-blueprints&#34;&gt;Example - key concepts of blueprints&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;---
name: my_blueprint                        # Custom blueprint name
gateways:
  8080/http: my_frontend/port
clusters:
  my_frontend:                            # Custom cluster name.
  
    gateways:                             # Gateway for this cluster services.
      routes:                             # Makes sense only with
        some_cool_breed:                  # multiple services per cluster.
          weight: 95%
          condition: User-Agent = Chrome
        some_other_breed:                 # Second service.
          weight: 5%
          
    services:                             # List of services
      -
        breed:
          ref: some_cool_breed
        scale:                            # Scale for this service.
          cpu: 2                          # Number of CPUs per instance.
          memory: 2048MB                  # Memory per instance (MB/GB units).
          instances: 2                    # Number of instances
      -                                          
        breed: 
          ref: some_other_breed           # Another service in the same cluster.  
        scale: large                      # Notice we used a reference to a &amp;quot;scale&amp;quot;. 
                                          # More on this later.
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;gateways&#34;&gt;Gateways&lt;/h2&gt;

&lt;p&gt;A gateway is a &amp;ldquo;stable&amp;rdquo; endpoint (or port in simplified sense) that almost never changes. When creating the mapping, it uses the definition (my_frontend/port in this case) from the &amp;ldquo;first&amp;rdquo; service in the cluster definition you reference. This service can of course be changed, but the gateway port normally doesn&amp;rsquo;t.&lt;/p&gt;

&lt;p&gt;Please take care of setting the &lt;code&gt;/tcp&lt;/code&gt; or &lt;code&gt;/http&lt;/code&gt; (default) type for the port. Using &lt;code&gt;/http&lt;/code&gt; allows Vamp to record more relevant metrics like response times and metrics.&lt;/p&gt;

&lt;p&gt;Read more about &lt;a href=&#34;./documentation/using-vamp/gateways/&#34;&gt;gateways&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;Note!&lt;/p&gt;
  &lt;p&gt;gateways are optional. You can just deploy services and have a home grown method to connect them to some stable, exposable endpoint.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&#34;clusters-and-services&#34;&gt;Clusters and services&lt;/h2&gt;

&lt;p&gt;In essence, blueprints define a collection of clusters.
A cluster is a group of different services, which will appear as a single service and serve a single purpose.&lt;/p&gt;

&lt;p&gt;Common use cases would be service A and B in an A/B testing scenario - usually just different
versions of the same service (e.g. canary release or blue/green deployment).&lt;/p&gt;

&lt;p&gt;Clusters are configured by defining an array of services. A cluster can be given an arbitrary name. Services are just lists or arrays of breeds.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;---
my_cool_cluster
  services
   - breed: 
      ref: my_cool_service_A      # reference to an existing breed
   -
     breed:                       # shortened inline breed
       name: my_cool_service_B
       deployable: some_container
       ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Clusters and services are just organisational items. Vamp uses them to order, reference and control the actual containers and gateways and traffic.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;This all seems redundant, right?&lt;/strong&gt; We have a reference chain of blueprints -&amp;gt; gateways -&amp;gt; clusters -&amp;gt; services -&amp;gt; breeds -&amp;gt; deployable. However, you need this level of control and granularity in any serious environment where DRY principles are taken seriously and where &amp;ldquo;one size fits all&amp;rdquo; doesn&amp;rsquo;t fly.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;dialects&#34;&gt;Dialects&lt;/h2&gt;

&lt;p&gt;Vamp allows you to use container driver specific tags inside blueprints. We call this a “dialect”.  Dialects effectively enable you to make full use of, for instance, the underlying features like mounting disks, settings commands and providing access to private Docker registries.&lt;/p&gt;

&lt;p&gt;We currently support the following dialects:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;docker:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;marathon:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;docker-dialect&#34;&gt;Docker dialect&lt;/h3&gt;

&lt;p&gt;The following example show how you can mount a volume to a Docker container using the Docker dialect.&lt;/p&gt;

&lt;h4 id=&#34;example-blueprint-using-the-docker-dialect&#34;&gt;Example blueprint - using the Docker dialect&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;---
name: busybox
clusters:
  busyboxes:
    services:
      breed:
        name: busybox-breed
        deployable: busybox:latest
      docker:
        Volumes:
          &amp;quot;/tmp&amp;quot;: ~
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Vamp will translate this into the proper API call. Inspecting the container after it&amp;rsquo;s deployed should show something similar to this:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;...
&amp;quot;Volumes&amp;quot;: {
      &amp;quot;/tmp&amp;quot;: &amp;quot;/mnt/sda1/var/lib/docker/volumes/1a3923fa6108cc3e19a7fe0eeaa2a6c0454688ca6165d1919bf647f5f370d4d5/_data&amp;quot;
  },
...    
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;marathon-dialect&#34;&gt;Marathon dialect&lt;/h3&gt;

&lt;p&gt;This is an example with Marathon that pulls an image from private repo, mounts some volumes, sets some labels and gets run with an ad hoc command: all taken care of by Marathon.&lt;/p&gt;

&lt;p&gt;We can provide the &lt;code&gt;marathon:&lt;/code&gt; tag either on the service level, or the cluster level. Any &lt;code&gt;marathon:&lt;/code&gt; tag set on the service level will override the cluster level as it is more specific. However, in 9 out of 10 cases the cluster level makes the most sense. Later, you can also mix dialects so you can prep your blueprint for multiple environments and run times within one description.&lt;/p&gt;

&lt;h4 id=&#34;example-blueprint-using-the-marathon-dialect&#34;&gt;example blueprint - using the Marathon dialect&lt;/h4&gt;

&lt;p&gt;Notice the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Under the &lt;code&gt;marathon:&lt;/code&gt; tag, we provide the command to run in the container by setting the &lt;code&gt;cmd:&lt;/code&gt; tag.&lt;/li&gt;
&lt;li&gt;We provide a url to some credentials file in the &lt;code&gt;uri&lt;/code&gt; array. As described in the Marathon docs (&lt;a href=&#34;https://mesosphere.github.io/marathon/docs/native-docker.html#using-a-private-docker-repository&#34;&gt;mesosphere.github.io/marathon - using a private Docker repository&lt;/a&gt;) this enables Mesos
to pull from a private registry, in this case registry.example.com where these credentials are set up.&lt;/li&gt;
&lt;li&gt;We set some labels with some arbitrary metadata.&lt;/li&gt;
&lt;li&gt;We mount the &lt;code&gt;/tmp&lt;/code&gt; to in Read/Write mode.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;---
name: busy-top:1.0
clusters:
  busyboxes:
    services:
      breed:
        name: busybox
        deployable: registry.example.com/busybox:latest
      marathon:
       cmd: &amp;quot;top&amp;quot;
       uris:
         -
           &amp;quot;https://some_host/some_path/some_file_with_docker_credentials&amp;quot;
       labels:
         environment: &amp;quot;staging&amp;quot;
         owner: &amp;quot;buffy the vamp slayer&amp;quot;
       container:
         volumes:
           -
             containerPath: &amp;quot;/tmp/&amp;quot;
             hostPath: &amp;quot;/tmp/&amp;quot;
             mode: &amp;quot;RW&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;scale&#34;&gt;Scale&lt;/h2&gt;

&lt;p&gt;Scale is the &amp;ldquo;size&amp;rdquo; of a deployed service. Usually that means the number of instances (servers) and allocated CPU and memory.&lt;/p&gt;

&lt;p&gt;Scales can be defined inline in a blueprint or they can defined separately and given a unique name. The following example is a scale named &amp;ldquo;small&amp;rdquo;. &lt;code&gt;POST&lt;/code&gt;-ing this scale to the &lt;code&gt;/scales&lt;/code&gt; REST API endpoint will store it under that name so it can be referenced from other blueprints.&lt;/p&gt;

&lt;h4 id=&#34;example-scale&#34;&gt;Example scale&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;---
name: small   # Custom name.

cpu: 2        # Number of CPUs per instance.
memory: 2gb   # Memory per instance, MB/GB units.
instances: 2  # Number of instances.
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;admonition note&#34;&gt;
  &lt;p class=&#34;admonition-title&#34;&gt;What next?&lt;/p&gt;
  &lt;p&gt;&lt;ul&gt;
&lt;li&gt;Read about &lt;a href=&#34;./documentation/using-vamp/deployments/&#34;&gt;Vamp deployments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Check the &lt;a href=&#34;./documentation/api/api-reference&#34;&gt;API documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;./documentation/installation/hello-world&#34;&gt;Try Vamp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>